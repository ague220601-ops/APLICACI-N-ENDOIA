
I‚Äôm building a React + Vite + TypeScript app called ENDOIA for endodontic data collection and decision support based on the AAE/ESE 2025 classification.

The /clinico page already:
	‚Ä¢	Fetches all cases of the logged-in clinician from an n8n webhook (/clinico/mis-casos)
	‚Ä¢	Renders a table with their cases
	‚Ä¢	Has a ‚ÄúVer detalles‚Äù modal per case
	‚Ä¢	Access is controlled by Firebase Auth (role = ‚Äúclinico‚Äù)

I want you to upgrade ONLY the clinician dashboard (/clinico) to make it more useful, without touching:
	‚Ä¢	Routes
	‚Ä¢	Auth logic
	‚Ä¢	n8n URLs
	‚Ä¢	Tutor/Investigator pages

Use TailwindCSS and keep the current dark-ish theme.

Assume each case object has at least these fields (adapt types as needed, but respect the meaning):

type ClinicoCase = {
  id: string;
  case_id: string;
  tooth_fdi?: string;
  fecha_registro?: string;  // ISO
  fecha_tto?: string | null;
  AEDE_pulpar_IA?: string | null;
  AEDE_apical_IA?: string | null;
  tto_propuesto?: string | null;
  control_1m_exito?: boolean | null;
  control_3m_exito?: boolean | null;
  control_6m_exito?: boolean | null;
  notes?: string | null;
  // other fields can exist, just don‚Äôt remove them
};

Please implement the following improvements in a modular way, using components under src/components/clinico/ if needed.

‚∏ª

1) Enhance IA summary in the case detail modal

In the ‚ÄúVer detalles‚Äù modal:
	1.	Improve the IA diagnosis section with two big badges:
	‚Ä¢	one for AEDE_pulpar_IA
	‚Ä¢	one for AEDE_apical_IA
	2.	Color-code the badges based on simple keyword detection (case-insensitive):
	‚Ä¢	Green ‚Üí normal / healthy
	‚Ä¢	includes: "normal", "healthy", "clinically normal"
	‚Ä¢	Blue ‚Üí mild / hypersensitivity
	‚Ä¢	includes: "hypersens", "hipersens", "mild"
	‚Ä¢	Orange ‚Üí symptomatic / inflamed
	‚Ä¢	includes: "symptomatic", "sintom√°tica", "inflam"
	‚Ä¢	Red ‚Üí necrosis / severe / abscess / sinus tract
	‚Ä¢	includes: "necr", "necrotic", "abscess", "sinus", "lesi√≥n apical"
	‚Ä¢	Yellow ‚Üí anything else or missing
	3.	Below the badges, add a card:
	‚Ä¢	Title: Orientaci√≥n terap√©utica sugerida
	‚Ä¢	Content: the tto_propuesto text
	‚Ä¢	Small caption text at the bottom:
‚ÄúRecomendaci√≥n basada en reglas objetivas ENDOIA (AAE/ESE 2025).‚Äù

Do not change the IA logic or backend, just the presentation.

‚∏ª

2) Mini clinician dashboard (top of /clinico)

At the top of the /clinico page, above the table, add a row of stat cards based only on the current clinician‚Äôs cases:

Cards:
	1.	Total de casos
	‚Ä¢	cases.length
	2.	Casos con seguimiento completo
	‚Ä¢	count cases where control_1m_exito, control_3m_exito, control_6m_exito are all not null/undefined.
	3.	% √©xito global (entre controles registrados)
	‚Ä¢	Consider all non-null controls across all cases:
control_1m_exito, control_3m_exito, control_6m_exito
	‚Ä¢	Success = value === true
	‚Ä¢	If there are at least, say, 10 controls in total, show:
XX % de controles con √©xito
	‚Ä¢	If there is very little data, show:
"Pendiente de m√°s datos de seguimiento"
	4.	Top 5 dientes tratados
	‚Ä¢	Count occurrences of tooth_fdi
	‚Ä¢	Show up to 5 most frequent FDI numbers with counts in a compact list (or mini bar representation).

Keep the layout responsive on mobile.

‚∏ª

3) ‚ÄúSeguimientos pendientes‚Äù widget

Below the stat cards (and still above the main table), add a widget:

Title: üîî Seguimientos pendientes

Inside, show:
	‚Ä¢	1 mes: number of cases where:
	‚Ä¢	fecha_tto is not null
	‚Ä¢	control_1m_exito is null/undefined
	‚Ä¢	3 meses: same idea for control_3m_exito
	‚Ä¢	6 meses: same idea for control_6m_exito

Add a button:

Ver casos con seguimiento pendiente

When clicked, it should apply a local filter to the table (in React state, no backend changes) so that the table shows only cases with at least one pending control. Provide a simple way (button or toggle) to clear the filter and show all cases again.

‚∏ª

4) ‚ÄúHistorial de dientes tratados‚Äù

Under the table, add a collapsible section:

Title: Historial de dientes tratados

Behavior:
	‚Ä¢	Group cases by tooth_fdi (ignore cases where tooth_fdi is missing).
	‚Ä¢	For each FDI number, show a summary row:
Diente 36 ‚Üí 4 casos
	‚Ä¢	Each row has a ‚ÄúVer casos‚Äù action (button or chevron) that expands a nested list showing:
	‚Ä¢	case_id
	‚Ä¢	fecha_registro
	‚Ä¢	A ‚ÄúVer detalles‚Äù button that reuses the same modal viewer of the main table.

This grouping is purely client-side.

‚∏ª

5) Clinician ‚ÄúEstad√≠sticas personales‚Äù section

Add a section below the mini-dashboard (can be on the same page, below the top cards, either as a block or under a ‚ÄúEstad√≠sticas personales‚Äù heading).

Inside it, implement:

5.1 Casos por mes (√∫ltimos 12 meses)
	‚Ä¢	Using fecha_registro, group cases by month (year-month).
	‚Ä¢	Build a simple line chart ‚ÄúCasos / mes‚Äù.
	‚Ä¢	You can use a small chart library if one is already in the project. If not, prefer a lightweight one like Recharts, or build a minimal custom chart with divs.

5.2 √âxito por tipo de tratamiento
	‚Ä¢	Group cases by tto_realizado if available, otherwise by tto_propuesto.
	‚Ä¢	For each treatment type:
	‚Ä¢	Count cases with at least one non-null control.
	‚Ä¢	Count how many have all available controls as true (success).
	‚Ä¢	Compute a % √©xito and show a horizontal bar list of treatments ordered by number of cases.

Handle the ‚Äúno data yet‚Äù scenario gracefully.

5.3 Distribuci√≥n por diagn√≥stico pulpar IA

En vez de reagrupar o reinterpretar diagn√≥sticos, quiero que uses exactamente las etiquetas que ya devuelve mi IA en el campo AEDE_pulpar_IA.

- Recorre todos los casos del cl√≠nico y agrupa por el string completo de AEDE_pulpar_IA.
- Ignora los casos donde AEDE_pulpar_IA est√© vac√≠o o null.
- Construye un gr√°fico sencillo (donut o barras) donde cada segmento/barras sea una de las etiquetas reales tal cual aparecen en los datos (sin convertirlas a ‚Äúreversible‚Äù, ‚Äúirreversible‚Äù, etc.).
- En la leyenda y en las etiquetas del gr√°fico se deben mostrar exactamente los textos originales de AEDE_pulpar_IA tal cual los genera mi modelo basado en AAE/ESE 2025.

Muy importante:
- No inventes categor√≠as nuevas.
- No reagrupes en ‚Äúnormal / pulpitis / necrosis‚Ä¶‚Äù.
- Simplemente cuenta frecuencia por etiqueta de AEDE_pulpar_IA.


‚∏ª

6) Dientes con m√°s fracasos (del propio cl√≠nico)

In the same ‚ÄúEstad√≠sticas personales‚Äù area, add a small block:

Title: Dientes con m√°s fracasos

Logic:
	‚Ä¢	For each case, if any of control_1m_exito, control_3m_exito, control_6m_exito is explicitly false, consider that a failure for that tooth.
	‚Ä¢	Aggregate by tooth_fdi.
	‚Ä¢	Show a short ranking:
	‚Ä¢	Diente 36 ‚Üí 3 fracasos
	‚Ä¢	Diente 46 ‚Üí 2 fracasos
	‚Ä¢	etc.

If there are no failures, show a friendly message:

‚ÄúA√∫n no se han registrado fracasos en tus controles.‚Äù

‚∏ª

7) Indicador de ‚Äúcasos complejos‚Äù

Define a simple client-side rule to flag ‚Äúcomplex‚Äù cases. You can adapt the rule to whatever fields exist, for example:

A case is complex if any of:
	‚Ä¢	periapical_index_PAI_1_5 >= 3
	‚Ä¢	radiolucency_yesno === true
	‚Ä¢	probing_max_depth_mm > 4
	‚Ä¢	spontaneous_pain_yesno === true

Use whatever fields are actually present in the case type. If any of these fields are missing in my real data, just ignore that part of the rule.

Compute:
	‚Ä¢	Number and % of complex cases for this clinician.

Render a small card like:

Casos complejos: 8 de 27 (29%)

‚∏ª

8) Calidad de los registros

Add a small ‚ÄúCalidad de tus registros‚Äù block in the stats area that shows:
	‚Ä¢	% de casos con notes no vac√≠as
	‚Ä¢	% de casos con todos los campos cl√≠nicos clave cumplimentados
(e.g., tooth_fdi, AEDE_pulpar_IA, AEDE_apical_IA, tto_propuesto)
	‚Ä¢	% de casos con al menos un control (1m, 3m o 6m) rellenado

You can render these as 3 horizontal progress bars with the percentage.


9) Optional FDI heatmap (simple)

If it‚Äôs not too complex, add a minimal FDI ‚Äúmap‚Äù:
	‚Ä¢	Grid with FDI labels (11‚Äì18, 21‚Äì28, 31‚Äì38, 41‚Äì48).
	‚Ä¢	Each tooth cell is color-coded based on number of cases from this clinician:
	‚Ä¢	0 casos ‚Üí gray
	‚Ä¢	1‚Äì2 casos ‚Üí light blue
	‚Ä¢	3‚Äì5 casos ‚Üí medium blue
	‚Ä¢	5 casos ‚Üí intense blue

Clicking on a tooth filters the main table by that tooth_fdi. Provide a way to clear the filter.

If this becomes too large or conflicts with existing layout, you can skip it.

‚∏ª

10) Very important constraints
	‚Ä¢	Do NOT implement any ‚ÄúIA vs cl√≠nico‚Äù comparison.
The clinician does not enter their own diagnosis, so this comparison is invalid.
	‚Ä¢	Do not change any API URL or backend logic.
	‚Ä¢	Do not touch tutor or investigator dashboards.
	‚Ä¢	Keep everything strictly client-side in /clinico.
	‚Ä¢	Ensure TypeScript types compile and do not break existing imports.
	‚Ä¢	Ensure everything is responsive on mobile and desktop.

‚∏ª
